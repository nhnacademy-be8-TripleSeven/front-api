<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NHN 24</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
<header class="header">
  <div class="logo">
    <a href="main.html"><img src="/image/logo/nhn24-logo.png" alt="NHN 24 ë¡œê³ "></a>
  </div>
  <div class="header-center">
    <div class="search-bar">
      <input type="text" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      <a href="book-search.html"><button>ğŸ”</button></a>
    </div>
    <nav class="menu">
      <ul>
        <li><a href="/recommended-books.html">ì¶”ì²œ ë„ì„œ</a></li>
        <li><a href="/domestic-books.html">êµ­ë‚´ ë„ì„œ</a></li>
        <li><a href="/foreign-books.html">ì™¸êµ­ ë„ì„œ</a></li>
        <li><a href="/bestsellers.html">ë² ìŠ¤íŠ¸ì…€ëŸ¬</a></li>
        <li><a href="/new-books.html">ì‹ ê°„ ì†Œê°œ</a></li>
        <li><a href="/events.html">ì´ë²¤íŠ¸</a></li>
      </ul>
    </nav>
  </div>
  <div class="user-actions">
    <a href ="#"><img src="/image/icons/person.png" alt="User Icon"></a>
    <a href ="#"><img src="/image/icons/cart.png" alt="Cart Icon"></a>
    <a href="join.html"><button class="login-btn">Login</button></a>
  </div>
</header>


<!-- ì´ë‹¬ì˜ ë² ìŠ¤íŠ¸ -->
<section class="best-section" id="slider1">
  <h2>ì´ ë‹¬ì˜ ë² ìŠ¤íŠ¸</h2>
  <div class="slider">
    <button class="arrow left" onclick="prevSlide('slider1')">â—€</button>
    <div class="slides"></div> <!-- ì—¬ê¸°ì—ì„œ ìŠ¬ë¼ì´ë“œê°€ JavaScriptë¡œ ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
    <button class="arrow right" onclick="nextSlide('slider1')">â–¶</button>
  </div>
</section>

<!-- ì´ ë„ì„œëŠ” ì–´ë•Œìš”? -->
<section class="recommended" id="slider2">
  <h2>ì´ ë„ì„œëŠ” ì–´ë•Œìš”?</h2>
  <div class="slider">
    <button class="arrow left" onclick="prevSlide('slider2')">â—€</button>
    <div class="slides"></div> <!-- ì—¬ê¸°ì—ì„œ ìŠ¬ë¼ì´ë“œê°€ JavaScriptë¡œ ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
    <button class="arrow right" onclick="nextSlide('slider2')">â–¶</button>
  </div>
</section>

<section class="editor-choice">
  <div class="choice-header">
    <div class="tabs">
      <button class="tab active" data-tab="tab1">í¸ì§‘ìì˜ ì„ íƒ</button>
      <button class="tab" data-tab="tab2">eBook</button>
      <button class="tab" data-tab="tab3">ì™¸êµ­ë„ì„œ</button>
    </div>
  </div>
  <div class="tab-content active" id="ITEMEDITORCHOICE">
    <div class="book-grid"></div> <!-- JavaScriptê°€ ë‚´ìš©ì„ ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
  </div>
  <div class="tab-content" id="EBOOK">
    <div class="book-grid"></div> <!-- JavaScriptê°€ ë‚´ìš©ì„ ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
  </div>
  <div class="tab-content" id="FOREIGN">
    <div class="book-grid"></div> <!-- JavaScriptê°€ ë‚´ìš©ì„ ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
  </div>
</section>


<!-- ê³µì§€ì‚¬í•­, ê²€ìƒ‰, ë¹ ë¥¸ ì„œë¹„ìŠ¤ -->
<section class="info-section">
  <div class="notice">
    <h3>ê³µì§€ì‚¬í•­</h3>
    <ul>
      <li><a href="#">NHN24 'ì²­ì†Œë…„ ë³´í˜¸ì •ì±…' ì¼ë¶€ ê°œì • ì•ˆë‚´</a></li>
      <li><a href="#">12ì›” í• ì¸ ì´ë²¤íŠ¸ ì•ˆë‚´</a></li>
      <li><a href="#">ì „ìì±… PCë·°ì–´ ì„¤ì • ì•ˆë‚´</a></li>
    </ul>
  </div>
  <div class="search">
    <h3>ê²€ìƒ‰</h3>
    <div class="search-bar">
      <input type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
      <button>ğŸ”</button>
    </div>
    <div class="search-options">
      <label>
        <input type="radio" name="search-option" value="faq">
        FAQ
      </label>
      <label>
        <input type="radio" name="search-option" value="notice">
        ê³µì§€ì‚¬í•­
      </label>
    </div>
  </div>
  <div class="quick-service">
    <h3>ë¹ ë¥¸ ì„œë¹„ìŠ¤</h3>
    <p>ë°˜í’ˆ/êµí™˜</p>
  </div>
</section>

<!-- í•˜ë‹¨ í˜œíƒ -->
<section class="benefits">
  <div class="benefit-item">
    <h4>ìŠ¤í˜ì…œ ì„œë¹„ìŠ¤</h4>
    <p>NHN ë©¤ë²„ì‹­</p>
    <p>NHN í¬ì¸íŠ¸</p>
  </div>
  <div class="benefit-item">
    <h4>íšŒì› í˜œíƒ</h4>
    <p>í¬ì¸íŠ¸ ì ë¦½</p>
    <p>WELCOME ì ë¦½ê¸ˆ</p>
  </div>
  <div class="benefit-item">
    <h4>ë°°ì†¡ ë§Œì¡±</h4>
    <p>NHN 24 ë°°ì†¡</p>
  </div>
</section>

<!-- í‘¸í„° -->
<footer>
  <div class="footer-links">
    <a href="#">íšŒì‚¬ì†Œê°œ</a>
    <a href="#">ì´ìš©ì•½ê´€</a>
    <a href="#"><strong>ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</strong></a>
    <a href="#">ì²­ì†Œë…„ ë³´í˜¸ì •ì±…</a>
  </div>
  <div class="footer-container">
    <div class="footer-info">
      <p>ëŒ€í‘œì´ì‚¬ ë§ˆë¥´ì½” | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ 123-456-7890</p>
      <p>í†µì‹ íŒë§¤ì—…ì‹ ê³  2024-ê´‘ì£¼ë™êµ¬-01211</p>
      <p>ì´ë©”ì¼: marco@nhn.com | í˜¸ìŠ¤íŒ… ì œê³µì NHN24</p>
      <p>Â© NHN24. All Rights Reserved.</p>
    </div>
    <div class="customer-center">
      <p><strong>ê³ ê°ì„¼í„° 1544-8282 (ë°œì‹ ì ë¶€ë‹´)</strong></p>
      <p>ê´‘ì£¼ê´‘ì—­ì‹œ ë™êµ¬ ì„œì„ë™ ì¡°ì„ ëŒ€í•™êµ 1ì¸µ NHNì•„ì¹´ë°ë¯¸</p>
      <p>Fax 062-1234-5678</p>
      <div class="footer-buttons">
        <button>1:1 ë¬¸ì˜</button>
        <button>FAQ</button>
        <button>ìœ„ì¹˜, ì˜ì—…ì‹œê°„ ì•ˆë‚´</button>
      </div>
    </div>
  </div>
</footer>
<script src="/js/main.js"></script>
<script>

  // ìŠ¬ë¼ì´ë” ìºì‹± ë°ì´í„°
  const sliderCache = {};
  const tabCache = {};

  document.addEventListener('DOMContentLoaded', () => {
    // ì´ˆê¸° ìŠ¬ë¼ì´ë” ë¡œë“œ
    initializeSlider('slider1', '/books/monthly');
    initializeSlider('slider2', '/books/recommendations');

    // ì´ˆê¸° í™œì„± íƒ­ ë¡œë“œ
    const activeTabButton = document.querySelector('.tab.active');
    if (activeTabButton) {
      const type = getTypeFromTab(activeTabButton.dataset.tab);
      const contentElement = document.querySelector(`#${type}`);
      if (contentElement) {
        fetch(`/books/type/${type}`)
        .then(response => response.json())
        .then(data => {
          tabCache[type] = data.content; // ìºì‹±
          renderTabContent(contentElement, data.content);
        })
        .catch(error => console.error('Error loading tab content:', error));
      }
    }
  });

  function getTypeFromTab(tabId) {
    const typeIdMap = {
      tab1: 'ITEMEDITORCHOICE',
      tab2: 'EBOOK',
      tab3: 'FOREIGN'
    };
    return typeIdMap[tabId] || '';
  }

  function initializeSlider(sliderId, apiUrl) {
    const sliderElement = document.querySelector(`#${sliderId} .slides`);
    if (!sliderElement) return;

    if (sliderCache[sliderId]) {
      renderSlides(sliderElement, sliderCache[sliderId]);
      updateSliderButtons(sliderId);
      return;
    }

    fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      sliderCache[sliderId] = data.content;
      renderSlides(sliderElement, data.content);
      updateSliderButtons(sliderId);
    })
    .catch(error => console.error('Error loading slider data:', error));
  }

  function updateSliderButtons(sliderId) {
    const slides = document.querySelectorAll(`#${sliderId} .slide`);
    const prevButton = document.querySelector(`#${sliderId} .arrow.left`);
    const nextButton = document.querySelector(`#${sliderId} .arrow.right`);
    const disable = slides.length <= 1;

    prevButton.disabled = disable;
    nextButton.disabled = disable;
  }

  function renderSlides(sliderElement, books) {
    sliderElement.innerHTML = '';
    books.forEach(book => {
      const slide = document.createElement('div');
      slide.classList.add('slide');
      slide.innerHTML = `
      <a href="#"><img src="${book.coverUrl}" alt="${book.title}" onerror="this.src='/image/default-book-cover.png'"></a>
      <p>${book.title}</p>
      <p>ì¶œíŒì‚¬: ${book.publisher}</p>
      <p>ê°€ê²©: <span style="text-decoration: line-through;">${book.regularPrice.toLocaleString()}ì›</span>
      <strong>${book.salePrice.toLocaleString()}ì›</strong></p>
    `;
      sliderElement.appendChild(slide);
    });
  }

  function renderTabContent(contentElement, books) {
    contentElement.innerHTML = '';
    books.forEach(book => {
      const bookItem = document.createElement('div');
      bookItem.classList.add('book-item');
      bookItem.innerHTML = `
      <a href="#"><img src="${book.coverUrl}" alt="${book.title}" onerror="this.src='/image/default-book-cover.png'"></a>
      <p class="title">${book.title}</p>
      <p>${book.publisher}</p>
      <p>ê°€ê²©: <span style="text-decoration: line-through;">${book.regularPrice.toLocaleString()}ì›</span>
      <strong>${book.salePrice.toLocaleString()}ì›</strong></p>
    `;
      contentElement.appendChild(bookItem);
    });
  }

</script>
</body>
</html>
