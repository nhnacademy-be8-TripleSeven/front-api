<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쿠폰 정책 생성</title>
    <link rel="stylesheet" th:href="@{/css/coupon-policy-register.css}">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="/js/axios-config.js"></script>
    <script th:src="@{/js/global.js}"></script>
    <script th:src="@{/js/coupon-policy-register.js}"></script>
</head>
<body>
<div class="container">

    <div th:replace="header :: header"></div>

    <main>
        <div th:replace="admin/admin-sidebar :: aside"></div>

        <div class="form-container">
            <form id="coupon-form">

                <!-- 정책 작성 가이드 -->
                <div class="policy-guide">
                    <h3>이벤트 정책 작성 가이드</h3>
                    <p>
                        <strong>회원가입 쿠폰 정책:</strong><br>
                        <span>‘Welcome’을 포함한 명칭으로 쿠폰 정책을 생성할 시, 회원가입 시 자동으로 쿠폰이 생성 및 발급됩니다.</span>
                    </p>
                    <p>
                        <strong>생일 쿠폰 정책:</strong><br>
                        <span>‘생일 축하 쿠폰 - ?월’을 포함한 명칭으로 쿠폰 정책을 생성할 시, 정책별로 해당 월의 1일에 생일이 포함된 회원에게 쿠폰이 생성 및 발급됩니다.</span><br>
                        단, <strong>2월</strong>의 경우 아래와 같이 윤년 여부에 따라 구분하여 작성해야 합니다:
                    <ul>
                        <li><strong>평년:</strong> "생일 축하 쿠폰 - 2월 (평년)"</li>
                        <li><strong>윤년:</strong> "생일 축하 쿠폰 - 2월 (윤년)"</li>
                    </ul>
                    </p>
                </div>

                <table class="form-table">
                    <h2 class="form-title">쿠폰 정책 생성</h2>
                    <tr>
                        <th>쿠폰 정책 이름</th>
                        <td><input type="text" id="coupon-policy-name" name="name" placeholder="정책 이름 입력"></td>
                    </tr>
                    <tr>
                        <th>최소 금액</th>
                        <td><input type="number" id="min-amount" name="couponMinAmount" placeholder="최소 금액 입력"></td>
                    </tr>
                    <tr>
                        <th>최고 금액</th>
                        <td><input type="number" id="max-amount" name="couponMaxAmount" placeholder="최고 금액 입력"></td>
                    </tr>
                    <tr>
                        <th>할인 금액/할인율(%)</th>
                        <td class="discount-field">
                            <select id="discount-type">
                                <option value="금액">할인 금액</option>
                                <option value="율">할인율</option>
                            </select>
                            <input type="number" id="discount-value" placeholder="값 입력">
                            <input type="hidden" id="couponDiscountAmount" name="couponDiscountAmount">
                            <input type="hidden" id="couponDiscountRate" name="couponDiscountRate">
                        </td>
                    </tr>
                    <tr>
                        <th>유효 기간</th>
                        <td><input type="number" id="validity" name="couponValidTime" placeholder="유효 기간 입력"></td>
                    </tr>
                </table>

                <button type="button" id="preview-btn" class="register-btn">미리보기</button>
                <button type="button" id="register-btn" class="register-btn">등록</button>
            </form>
        </div>


        <div class="popup-overlay" id="popup-overlay">
            <div class="popup-content">
                <h2>쿠폰 정책 생성 조회</h2>
                <table class="popup-table">
                    <tr>
                        <th>쿠폰 정책 이름</th>
                        <td id="popup-name"></td>
                    </tr>
                    <tr>
                        <th>최소 금액</th>
                        <td id="popup-min"></td>
                    </tr>
                    <tr>
                        <th>최고 금액</th>
                        <td id="popup-max"></td>
                    </tr>
                    <tr>
                        <th>할인 금액/할인율</th>
                        <td id="popup-discount"></td>
                    </tr>
                    <tr>
                        <th>유효 기간</th>
                        <td id="popup-validity"></td>
                    </tr>
                </table>
                <button id="close-popup">확인</button>
            </div>
        </div>

        <div class="popup-overlay" id="success-popup-overlay">
            <div class="popup-content">
                <h2>등록 성공</h2>
                <p id="success-message"></p>
                <button id="close-success-popup">확인</button>
            </div>
        </div>

    </main>

    <div th:replace="footer :: footer"></div>

</div>
</body>
</html>